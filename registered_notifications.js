const addNotificationCSS=()=>{const n=document.createElement("style");n.innerHTML="\n        #sale-notification {\n            position: fixed;\n            bottom: 20px;\n            right: 350px;\n            background-color: rgb(255 255 255);\n            box-shadow: 0 0 2px 1px #00095b;\n            color: white;\n            padding: 10px 20px;\n            border-radius: 5px;\n            font-family: Arial, sans-serif;\n            font-size: 14px;\n            opacity: 0;\n            transition: opacity 0.5s ease;\n            z-index: 1000;\n            max-width:300px;\n            display: flex;\n            flex-direction: column;\n            border-left:solid 10px #00095b;\n            padding-bottom:50px;\n        }\n        #sale-notification.show {\n            opacity: 1;\n        }\n        #sale-notification .name {\n            font-size: 17px;\n            margin: 5px 0 0;\n            color: #0014cd;\n        }\n        #sale-notification .name span{\n            font-weight:bold;\n        }\n        #sale-notification .info{\n            font-style: italic;\n            color:black;\n            margin-block: 5px;\n        }\n        #sale-notification .info span\n        {\n            font-weight:bold;\n        }\n        #sale-notification .info span{\n            color:#00095b;\n        }\n        #sale-notification .time,\n        #sale-notification .link\n        {\n            display: flex;\n            position: absolute;\n            bottom:10px;\n            align-items: center;\n            gap: 5px;\n        }\n        #sale-notification .link\n        {\n            align-self: end;\n            width: fit-content;\n            right:20px;\n            color:white;\n            cursor:pointer;\n            padding:5px 10px;\n            border-radius:5px;\n            background-color:#00095b;\n            text-decoration: none;\n        }\n        #sale-notification .time {\n            left: 20px;\n            font-size: 12px;\n            color: red;\n        }\n        @media (max-width:767px)\n        {\n            #sale-notification {\n                top: 100px;\n                bottom: unset;\n                left: 4%;\n                line-height: 1.1em;\n                width: 100%;\n                max-width: 75%;\n                padding: 5px;\n                z-index: 995;\n                border-left: solid 5px #00095b;\n                padding-bottom: 30px;\n            }\n            #sale-notification .name {\n                font-size: 15px;\n            }\n            #sale-notification .info {\n                font-size: 12px;\n                margin-top:5px;\n            }\n            #sale-notification .time svg {\n                width: 15px;\n                height: 15px;\n            }\n            #sale-notification .time {\n                left: 5px;\n            }\n            #sale-notification .link\n            {\n                right:10px;\n                font-size:12px;\n                padding: 1px 5px;\n            }\n            #sale-notification .time,\n            #sale-notification .link\n            {\n                bottom:5px;\n            }\n        }\n    ",document.head.appendChild(n)},addNotificationDiv=()=>{const n=document.createElement("div");n.id="sale-notification",n.className="sale-notification",document.body.appendChild(n)},calculateTimeAgo=n=>{const[t,i]=n.split(":").map(Number),o=new Date,e=new Date(o.getFullYear(),o.getMonth(),o.getDate(),t,i),a=o-e,c=Math.floor(a/6e4),s=Math.floor(c/60);return c<1?"vài giây trước":c<60?`${c} phút trước`:`${s} giờ trước`},formatNotification=n=>{const{name:t,car:i,time:o,gender:e,link:a}=n,c="male"===e?"Anh":"Chị";return`\n        <span class="time">\n        <svg fill="#ff0000" height="20px" width="20px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 489.42 489.42" xml:space="preserve" stroke="#ff0000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M46.1,138.368c4.2,2.1,16.1,8.4,29.1-6.2c5.2-7.3,10.4-14.6,16.6-21.8c7.3-8.3,6.2-21.8-2.1-29.1 c-8.3-7.3-21.8-6.2-29.1,2.1s-14.6,17.7-20.8,27C33.7,119.668,36.8,132.068,46.1,138.368z"></path> <path d="M249,40.568c19.8,0,39.5,3.1,58.3,9.4c12.6,3.7,21.8-4.2,26-12.5c3.1-11.4-3.1-22.9-13.5-26 c-22.9-7.3-45.8-11.4-69.7-11.4c-11.4,0-20.8,8.3-20.8,19.8S237.6,40.568,249,40.568z"></path> <path d="M434.2,167.468c7.3,17.7,11.4,36.4,13.5,55.1c0,0,1.2,23.2,22.9,19.8c21.5-2.8,18.7-23.9,18.7-23.9 c-2.1-22.9-8.3-45.8-16.6-66.6c-5.2-10.4-16.6-15.6-27-11.4C435.2,145.668,430,157.068,434.2,167.468z"></path> <path d="M359.3,75.968c16.6,11.4,31.2,25,43.7,40.6c9.3,11.6,25,6.8,28.1,3.1c8.3-7.3,10.4-20.8,3.1-29.1 c-14.6-17.7-32.3-34.3-52-47.9c-9.4-6.2-21.8-4.2-28.1,5.2S349.9,69.668,359.3,75.968z"></path> <path d="M134.6,72.768c16.6-10.4,35.4-18.7,54.1-23.9c11.4-3.1,17.7-14.6,14.6-25c-3.1-11.4-14.6-17.7-25-14.6 c-22.9,6.2-44.7,15.6-64.5,28.1c-9.4,6.2-12.5,18.7-6.2,28.1C111.7,71.768,120.5,77.968,134.6,72.768z"></path> <path d="M468.5,268.368c-11.4-3.1-21.8,4.2-23.9,15.6c-2.1,9.4-8.5,31.3-8.6,33.4c-27.5,71.5-93.5,121.8-169.3,129.9 c-74.6,7.8-147.2-25.9-189.3-86.5l38.5,8.5c10.4,2.1,21.8-4.2,23.9-15.6c2.1-10.4-4.2-21.8-15.6-23.9l-81.1-17.7 c-5.2-1-21.4,0-25,15.6l-17.7,82.2c-2.1,10.4,4.2,21.8,15.6,23.9c12.7,1.3,21.8-6.2,25-16.6l6.2-28.2 c46.3,62.7,129.9,109.1,223.7,99c94.6-10.2,174.8-73.9,206-163.3c1-2.6,5.7-24.4,7.3-32.3 C487.3,280.868,480,270.468,468.5,268.368z"></path> <path d="M164.6,265.268h95.9c11.4,0,19.8-9.4,20.8-20.8v-142.2c0-11.4-9.4-20.8-20.8-20.8c-11.4,0-20.8,9.4-20.8,20.8v121.4h-75.1 c-11.4,0-20.8,9.4-20.8,20.8S153.1,265.268,164.6,265.268z"></path> </g> </g> </g></svg>\n        ${calculateTimeAgo(o)}</span> \n        <p class="name">${c} <span>${t}</span></p>\n        <p class="info">đã đăng ký <span>${i}</span> cho sự kiện lái thử sắp tới.</p>\n        <a class="link" href="${a}">Đi xem thử \n        <svg viewBox="0 0 24 24"  height="25px" width="25px" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="white"><g id="SVGRepo_bgCarrier" stroke-width="white"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M5 12H19M19 12L13 6M19 12L13 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>\n        </a>\n    `},showNotification=n=>new Promise((t=>{const i=document.getElementById("sale-notification");i.innerHTML=n,i.classList.add("show"),setTimeout((()=>{i.classList.remove("show"),t()}),5e3)})),startNotifications=async()=>{try{const n=await fetch("https://duongtai26495.github.io/custom_ladi/customer.json"),t=(await n.json()).users,i=async()=>{const n=Math.floor(10001*Math.random())+5e3,i=Math.floor(Math.random()*t.length),e=formatNotification(t[i]);await showNotification(e),console.log(`Thông báo tiếp theo sau: ${n}ms`),setTimeout((()=>{o()}),n)},o=()=>{i()};o()}catch(n){console.error("Lỗi khi lấy dữ liệu JSON:",n)}};document.addEventListener("DOMContentLoaded",(()=>{addNotificationCSS(),addNotificationDiv();const n=Math.floor(7001*Math.random())+3e3;setTimeout((()=>{startNotifications()}),n)}));
